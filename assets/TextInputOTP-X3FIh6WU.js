import{j as a}from"./jsx-runtime-C7JLgHXN.js";import{r as f}from"./iframe-Cj8hrqrB.js";import{c as h}from"./utils-CDN07tui.js";import{a as A}from"./Icons-CZplwVZP.js";const y=o=>o.replace(/\D/g,""),E=({id:o,label:m,error:c,required:w,disabled:b,name:v,className:q,inputClassName:N,count:D,value:j,onChange:I})=>{const n=Math.max(1,D),T=f.useRef([]),g=f.useMemo(()=>y(j).slice(0,n),[j,n]),l=f.useMemo(()=>{const e=new Array(n).fill("");for(let t=0;t<g.length;t+=1)e[t]=g[t];return e},[g,n]),M=f.useMemo(()=>Array.from({length:n},(e,t)=>({position:t,key:`${o}-digit-${t}`})),[o,n]),d=e=>{const t=[...l];e(t),I(t.join(""))},p=e=>{const t=T.current[e];t&&(t.focus(),t.select())},$=(e,t)=>{const r=y(t.currentTarget.value);if(!r){d(u=>{u[e]=""});return}d(u=>{let i=e;r.split("").forEach(x=>{i>=n||(u[i]=x,i+=1)});const s=Math.min(e+r.length,n-1);p(s)})},k=(e,t)=>{if(t.key==="Backspace"){t.preventDefault(),l[e]?d(r=>{r[e]=""}):e>0&&(d(r=>{r[e-1]=""}),p(e-1));return}if(t.key==="ArrowLeft"&&e>0){t.preventDefault(),p(e-1);return}t.key==="ArrowRight"&&e<n-1&&(t.preventDefault(),p(e+1))},C=(e,t)=>{t.preventDefault();const r=y(t.clipboardData.getData("text"));r&&d(u=>{let i=e;r.split("").forEach(x=>{i>=n||(u[i]=x,i+=1)});const s=Math.min(e+r.length,n-1);p(s)})};return a.jsxs("div",{className:h("flex w-full flex-col gap-2",q),children:[m&&a.jsxs("label",{htmlFor:o,className:"text-[16px] font-medium text-muted-foreground",children:[m,w&&a.jsx("span",{className:"text-destructive",children:"*"})]}),v?a.jsx("input",{type:"hidden",name:v,value:l.join("")}):null,a.jsx("div",{id:o,className:h("flex w-full items-center justify-between gap-4",b&&"cursor-not-allowed opacity-70"),children:M.map(({position:e,key:t})=>{const r=e===0,u=e===n-1,i=!l[e];return a.jsxs("div",{className:"relative h-12 w-12",children:[a.jsx("input",{ref:s=>{T.current[e]=s},type:"text",inputMode:"numeric",autoComplete:e===0?"one-time-code":"off",pattern:"\\d*",maxLength:1,value:l[e],"aria-invalid":!!c,"aria-describedby":c?`${o}-error`:void 0,onChange:s=>$(e,s),onFocus:s=>s.currentTarget.select(),onKeyDown:s=>k(e,s),onPaste:s=>C(e,s),disabled:b,className:h("h-12 w-12 min-h-[48px] py-2 px-4 border bg-input dark:bg-input/30 border-border text-center text-[20px] font-semibold text-foreground outline-none transition focus:bg-input focus:border-border focus:shadow focus:ring-0",r&&"rounded-l-2xl",u&&"rounded-r-2xl",c&&"border-destructive focus:border-destructive focus:shadow",N),"aria-label":m?`${m} digit ${e+1}`:`Digit ${e+1}`}),i&&a.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center text-muted-foreground",children:a.jsx("span",{className:"text-[24px] font-light",children:"âˆ’"})})]},t)})}),c&&a.jsxs("div",{id:`${o}-error`,className:"flex items-center gap-2 text-[14px] text-destructive",children:[a.jsx(A,{name:"info"}),a.jsx("span",{children:c})]})]})};E.__docgenInfo={description:"",methods:[],displayName:"TextInputOTP",props:{id:{required:!0,tsType:{name:"string"},description:""},count:{required:!0,tsType:{name:"number"},description:""},value:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},label:{required:!1,tsType:{name:"string"},description:""},error:{required:!1,tsType:{name:"string"},description:""},required:{required:!1,tsType:{name:"boolean"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},name:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},inputClassName:{required:!1,tsType:{name:"string"},description:""}}};export{E as T};
