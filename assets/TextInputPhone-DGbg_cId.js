import{j as t}from"./jsx-runtime-CChQA9tb.js";import{r}from"./iframe-D5OrQ5bS.js";import{c}from"./utils-CDN07tui.js";import{a as x}from"./Icons-DyZL75T8.js";const L=[{name:"Tunisia",code:"+216",flag:"tunisia",iso2:"TN"},{name:"Algeria",code:"+213",flag:"algeria",iso2:"DZ"},{name:"Egypt",code:"+20",flag:"egypt",iso2:"EG"},{name:"Morocco",code:"+212",flag:"morocco",iso2:"MA"}],N=a=>a.replace(/[\s()+-]/g,"").toLowerCase(),F=(a,s)=>{if(!a)return;const d=N(a);return s.find(({code:o,iso2:i})=>N(o)===d||i&&i.toLowerCase()===d)},q=a=>{const{id:s,label:d,error:o,countries:i,initialCountryCode:h,onCountryChange:y,required:T,className:D,type:A="tel",...w}=a,n=r.useMemo(()=>i?.length?i:L,[i]),[u,g]=r.useState(()=>F(h,n)?.code??n[0]?.code??""),[p,m]=r.useState(!1),b=r.useRef(null),j=`${s}-country-list`,E=w.disabled,f=n.find(e=>e.code===u),v=f??n[0];r.useEffect(()=>{f||!n.length||g(n[0].code)},[n,f]),r.useEffect(()=>{const e=F(h,n);e&&e.code!==u&&(g(e.code),y?.(e))},[h,n,u,y]),r.useEffect(()=>{const e=C=>{b.current&&!b.current.contains(C.target)&&m(!1)},l=C=>{C.key==="Escape"&&m(!1)};return document.addEventListener("mousedown",e),document.addEventListener("keyup",l),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keyup",l)}},[]);const B=e=>{g(e.code),y?.(e),m(!1)};return t.jsxs("div",{className:"flex w-full flex-col gap-2",children:[d&&t.jsxs("label",{htmlFor:s,className:"cursor-pointer text-[16px] font-medium text-[#6F7A93]",children:[d,T&&t.jsx("span",{className:"text-[#EE9121]",children:"*"})]}),t.jsxs("div",{ref:b,className:c("relative text-[#4D5462]",o&&"text-[#F4504B] focus-within:text-[#4D5462]"),children:[t.jsxs("div",{className:c("flex w-full items-center border border-[#C6D2DB] bg-[#F4F7F9] transition focus-within:shadow",p?"rounded-t-md":"rounded-md",o&&"border-[#FEA6A3]",E&&"cursor-not-allowed opacity-70"),children:[t.jsxs("button",{type:"button",disabled:E,onClick:()=>m(e=>!e),"aria-haspopup":"listbox","aria-expanded":p,"aria-controls":j,className:"flex items-center gap-2 border-r border-[#C6D2DB] pl-4 pr-2 py-2 text-left text-[14px] font-semibold text-[#111827] focus:outline-none",children:[t.jsx(x,{className:"rounded-full w-fit",name:v?.flag}),t.jsx("span",{children:v?.code}),t.jsx("span",{className:c("ml-auto text-[#6F7A93] transition-transform duration-200",p&&"rotate-180"),children:t.jsx(x,{name:"arrow-down"})})]}),t.jsx("input",{...w,id:s,type:A,"aria-invalid":!!o,"aria-describedby":o?`${s}-error`:void 0,className:c("h-10 flex-1 border-none bg-transparent px-4 text-[16px] text-[#111827] placeholder:text-[#9BA5BE] focus:outline-none",D)})]}),p&&t.jsx("div",{id:j,role:"listbox",className:"absolute left-0 top-full z-20 mt-0.5 max-h-60 w-full overflow-auto rounded-b-md border border-[#C6D2DB] bg-white text-[14px] shadow-lg",children:n.map(e=>{const l=e.code===(f?.code??u);return t.jsxs("button",{type:"button",role:"option","aria-selected":l,onClick:()=>B(e),className:c("flex w-full items-center gap-3 px-4 py-2 text-left transition hover:bg-[#F4F7F9]",l&&"bg-[#EEF1F6] font-semibold"),children:[t.jsx(x,{className:"rounded-full w-fit",name:e.flag}),t.jsx("span",{className:"flex-1 text-[#111827]",children:e.name}),t.jsx("span",{className:"font-medium text-[#6F7A93]",children:e.code})]},`${e.iso2??e.code}`)})})]}),o&&t.jsxs("div",{id:`${s}-error`,className:"flex items-center gap-2 text-[14px] text-[#F4504B]",children:[t.jsx(x,{name:"info"}),t.jsx("span",{children:o})]})]})};q.__docgenInfo={description:"",methods:[],displayName:"TextInputPhone",props:{id:{required:!0,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},error:{required:!1,tsType:{name:"string"},description:""},countries:{required:!1,tsType:{name:"Array",elements:[{name:"CountryOption"}],raw:"CountryOption[]"},description:""},initialCountryCode:{required:!1,tsType:{name:"string"},description:""},onCountryChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(country: CountryOption) => void",signature:{arguments:[{type:{name:"CountryOption"},name:"country"}],return:{name:"void"}}},description:""}}};export{q as T};
